from pnl import PnLCalculator
import numpy as np

positions = np.array([-100, -100, -200, -100, 100, 100, 200, 100, -100, -100, -100, 400, 300, 200, 100, 600, 500, 96, 37, 167, 200, 400, 300, 200, 100, 100, 400, 300, 200, 600, 500, 100, 200, 300, -500, -400, -300, -200, -100, -179, -100, -200, -400, -100, -300, -100, -400, -300, -200, -100, -100, -300, -200, -100, -200, -100, -100, -100, -100, -100, 100, -200, -100, -200, -100, -100, 100, 100, -100, -100, -200, -100, -300, -100, 100, -100, -200, -100, -100, 300, 200, 100, 200, 100, 600, 500, 400, 300, 200, 100, -100, -100, -100, -200, -300, -100, -100, -200, -100, -100, -100, -200, 100, 500, 400, 300, 200, 100, 400, 100, 300, 100, 200, 100, 100, 200, 100, 100, 200, 200, 100, 200, 300, 100, 100, 100, -300, -200, -100, 100, 200, 300, 200, 100, 200, 100, -400, -300, -200, -100, -100, -100, -200, 200, 100, -100, -100, -100, -200, -46, -54, 100, 300, 100, 100, 200, 100, 100, -200, -100, -95, -5, -63, -45, -30, -20, -23, -19, -100, -100, -200, -100, -100, -200, -100, -100, -200, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, -100, -200, 100, -100, -100, -100, 100, -100, -100, -300, -100, 100, 100, 100, 100, 100, -100, -200, 100, 100, 100, 100, 100, -100, 200, 100, 100, 200, 2, 12, -100, -100, -200, 200, 100, -100, 100, -100, -41, -20, -100, 100, 100, 100, -100, -100, -100, 100, -400, -300, -100, -200, 500, 400, 300, 200, 100, 300, 200, 100, 100, 100, 100, 200, -100, -100, -100, -200, 100, 200, 100, 100, 100, 200, -100, -200, -100, 100, -100, 100, 200, 100, 100, -100, -100, -200, 100, 100, 200, 200, 100, 200, 100, -300, -200, -100, -400, -300, -200, -100, 200, 100, 100, -200, -100, -200, -100, 100, 200, 200, 100, 200, 100, 100, 200, 300, 100, 100, 200, -100, 100, 100, 200, 200, 100, -100, -200, -63, -10, -100, -200, -300, -200, -100, -200, -100, -200, -100, -200, -100, -100, -200, -400, -300, -200, -100, 100, 200, 100, 100, 100, 100, 200, 100, -200, -100, -100, 100, -200, 100, 200, 100, 100, -200, -100, 100, 200, 200, 100, 100, 100, 200, 100, -200, -100, -100, 100, 100, 200, 100, -100, -100, 100, 100, 100, -100, 600, 500, 400, 300, 100, 200, -100, -200, -100, 300, 200, 100, -100, 300, 200, 100, 25, 1, 100, 25, 25, 25, 6, 6, 6, 6, 200, 100, -39, -1, -4, -6, -47, -2, -1, -100, -200, -100, 300, 200, 100, 100, 200, 100, -100, -100, -100, -200, -100, -100, -200, -100, -200, -300, 200, 100, -200, -100, 400, 300, 200, 100, -200, -100, -200, -100, -100, 100, 300, 100, 200, -600, -500, -400, -300, -200, -100, -200, -100, -200, -100, -500, -400, -300, -200, -100, -100, -200, -139, -161, -400, 500, 400, 300, 200, 100, 400, 300, 200, 200, 100, 300, 200, 100, 100, 233, 300, 200, 100, 100, 102, 200, 25, 75, 300, 100, 200, 100, -100, -100, -100, 1, -200, -100, -100, -100, -200, -100, -100, 100, 400, 200, 100, -75, -300, -100, -200, -400, 100, 200, 100, 300, 200, 100, 100, 200, 100, 100, 63, 300, 200, 37, 200, 163, 100, -100, -200, -100, -100, -100, -200, -200, -300, -100, -100, 100, -200, 100, -200, -100, -100, -200, 100, 100, 100, 200, 100, -300, -200, -100, -100, 100, 100, 200, -100, -100, -200, -100, -100, 100, -200, -100, 100, 99, 1, -100, -100, -100, -200, -100, 200, 100, -100, -100, -100, -200, -100, -200, -300, -64, 400, 300, 200, 100, 400, 200, 300, 200, 100, -100, 300, 200, 100, 100, 78, 122, -400, -300, -100, -200, -100, -200, -31, -4, -230, -35, -400, -100, 100, 100, 200, 100, 100, -600, -500, -400, -300, -200, -100, 400, 300, 200, 100, 300, 200, 100, 300, 200, 100, 200, 100, 100, 100, 200, 100, 100, 100, 100, 100, 100, 200, 100, -100, 100, 200, 100, -100, 100, -100, 100, -100, 100, -200, -100, 100, 100, 200, -100, 100, -100, 200, 100, -100, -100, -100, 100, -100, -100, 100, -100, -100, -100, 100, 100, 100, 100, -100, -100, -200, -400, -300, -100, -200, 200, 100, 300, 200, 100, 100, 100, 100, -100, -100, -200, -100, 82, 18, 200, -100, -200, 100, 100, 200, 200, 100, -200, -100, 100, 200, 100, -100, -100, 100, -100, 100, -100, -100, 100, -100, -100, -100, -100, -300, -200, -100, -100, 100, 200, 300, 100, 100, 100, -100, -100, -100, 100, 200, -100, 100, -100, -200, -20, -100, -200, -100, -100, -200, 100, 100, 100, -100, -100, -95, -5, -200, -100, -100, -200, -100, -100, 100, -100, 100, 100, 200, 100, 300, -200, -100, 400, 300, 200, 100, 100, 200, 100, 600, 500, 400, 200, 300, 100, -100, -200, -100, -200, -100, -100, -100, -200, -100, -100, -10000, -5, -661])
exec_prices = np.array([0.00012664, 0.00012739, 0.00012728, 0.00012694, 0.00012692, 0.00012629, 0.00012629, 0.00012592, 0.00012677, 0.00012686, 0.00012711, 0.00012366, 0.00012427, 0.00012530, 0.00012531, 0.00012242, 0.00012304, 0.00011836, 0.00011804, 0.00011804, 0.00011804, 0.00012340, 0.00012402, 0.00012464, 0.00012522, 0.00012383, 0.00012199, 0.00012260, 0.00012321, 0.00012078, 0.00012138, 0.00012255, 0.00012255, 0.00012255, 0.00012564, 0.00012502, 0.00012439, 0.00012377, 0.00012316, 0.00012415, 0.00012353, 0.00012540, 0.00012540, 0.00012478, 0.00012477, 0.00012389, 0.00012575, 0.00012513, 0.00012450, 0.00012394, 0.00012404, 0.00012528, 0.00012466, 0.00012430, 0.00012527, 0.00012466, 0.00012523, 0.00012531, 0.00012532, 0.00012532, 0.00012498, 0.00012586, 0.00012653, 0.00012716, 0.00012689, 0.00012727, 0.00012598, 0.00012604, 0.00012739, 0.00012802, 0.00012790, 0.00012849, 0.00012865, 0.00012912, 0.00012808, 0.00012849, 0.00012977, 0.00012944, 0.00013058, 0.00012801, 0.00012865, 0.00012929, 0.00012820, 0.00012884, 0.00012610, 0.00012673, 0.00012737, 0.00012756, 0.00012806, 0.00012870, 0.00012794, 0.00012828, 0.00012900, 0.00012858, 0.00012922, 0.00012892, 0.00012907, 0.00012971, 0.00012954, 0.00013069, 0.00013137, 0.00013135, 0.00013086, 0.00012828, 0.00012892, 0.00012957, 0.00013022, 0.00013036, 0.00012828, 0.00012841, 0.00012892, 0.00012906, 0.00012957, 0.00013022, 0.00012984, 0.00012920, 0.00013017, 0.00012963, 0.00012953, 0.00012883, 0.00012947, 0.00012824, 0.00012856, 0.00012888, 0.00012823, 0.00012823, 0.00013016, 0.00012951, 0.00012887, 0.00013007, 0.00012942, 0.00012877, 0.00012909, 0.00012974, 0.00012825, 0.00012890, 0.00013080, 0.00013014, 0.00012949, 0.00012885, 0.00012928, 0.00012988, 0.00012993, 0.00012860, 0.00012924, 0.00012885, 0.00012912, 0.00012955, 0.00012949, 0.00013007, 0.00013007, 0.00012891, 0.00012762, 0.00012776, 0.00012777, 0.00012826, 0.00012855, 0.00012725, 0.00012852, 0.00012789, 0.00012890, 0.00012890, 0.00012890, 0.00012890, 0.00012890, 0.00012890, 0.00012890, 0.00012890, 0.00012955, 0.00013001, 0.00013019, 0.00013072, 0.00013140, 0.00013137, 0.00013122, 0.00013187, 0.00013187, 0.00013097, 0.00013115, 0.00013092, 0.00013079, 0.00013057, 0.00013051, 0.00013033, 0.00013032, 0.00013023, 0.00013023, 0.00013092, 0.00013157, 0.00013095, 0.00013179, 0.00013106, 0.00013151, 0.00013121, 0.00013072, 0.00013122, 0.00013203, 0.00013173, 0.00013141, 0.00013092, 0.00013092, 0.00013093, 0.00013053, 0.00013118, 0.00013183, 0.00013120, 0.00013120, 0.00013096, 0.00013061, 0.00013012, 0.00013098, 0.00012959, 0.00012966, 0.00012948, 0.00012884, 0.00012821, 0.00012821, 0.00012887, 0.00012970, 0.00013014, 0.00012757, 0.00012759, 0.00012795, 0.00012668, 0.00012719, 0.00012812, 0.00012812, 0.00012821, 0.00012758, 0.00012766, 0.00012668, 0.00012731, 0.00012731, 0.00012821, 0.00012758, 0.00012988, 0.00012923, 0.00012885, 0.00012858, 0.00012704, 0.00012768, 0.00012832, 0.00012896, 0.00012960, 0.00012723, 0.00012786, 0.00012850, 0.00012723, 0.00012734, 0.00012661, 0.00012660, 0.00012723, 0.00012723, 0.00012807, 0.00012787, 0.00012758, 0.00012695, 0.00012758, 0.00012758, 0.00012731, 0.00012694, 0.00012753, 0.00012816, 0.00012786, 0.00012624, 0.00012657, 0.00012533, 0.00012561, 0.00012525, 0.00012518, 0.00012658, 0.00012758, 0.00012721, 0.00012632, 0.00012718, 0.00012654, 0.00012536, 0.00012598, 0.00012521, 0.00012523, 0.00012718, 0.00012647, 0.00012584, 0.00012782, 0.00012697, 0.00012633, 0.00012571, 0.00012686, 0.00012749, 0.00012670, 0.00012775, 0.00012712, 0.00012777, 0.00012714, 0.00012587, 0.00012629, 0.00012630, 0.00012694, 0.00012599, 0.00012662, 0.00012575, 0.00012575, 0.00012462, 0.00012513, 0.00012392, 0.00012330, 0.00012516, 0.00012300, 0.00012210, 0.00012239, 0.00012206, 0.00012267, 0.00012256, 0.00012408, 0.00012470, 0.00012470, 0.00012533, 0.00012532, 0.00012604, 0.00012598, 0.00012535, 0.00012598, 0.00012535, 0.00012629, 0.00012567, 0.00012629, 0.00012567, 0.00012568, 0.00012631, 0.00012796, 0.00012793, 0.00012759, 0.00012695, 0.00012745, 0.00012682, 0.00012683, 0.00012665, 0.00012614, 0.00012579, 0.00012602, 0.00012519, 0.00012803, 0.00012740, 0.00012789, 0.00012727, 0.00012843, 0.00012804, 0.00012740, 0.00012788, 0.00012677, 0.00012966, 0.00012902, 0.00012724, 0.00012743, 0.00012741, 0.00012805, 0.00012803, 0.00012775, 0.00012740, 0.00012774, 0.00013001, 0.00012937, 0.00012966, 0.00012915, 0.00012849, 0.00012851, 0.00012793, 0.00012871, 0.00012907, 0.00012872, 0.00012820, 0.00012756, 0.00012816, 0.00012427, 0.00012489, 0.00012551, 0.00012614, 0.00012715, 0.00012729, 0.00012834, 0.00012880, 0.00012839, 0.00012573, 0.00012636, 0.00012699, 0.00012835, 0.00012587, 0.00012650, 0.00012714, 0.00012648, 0.00012648, 0.00012611, 0.00012714, 0.00012714, 0.00012714, 0.00012714, 0.00012714, 0.00012714, 0.00012714, 0.00012594, 0.00012657, 0.00012699, 0.00012699, 0.00012700, 0.00012700, 0.00012700, 0.00012702, 0.00012702, 0.00012765, 0.00012758, 0.00012818, 0.00012677, 0.00012740, 0.00012803, 0.00012740, 0.00012676, 0.00012656, 0.00012734, 0.00012787, 0.00012822, 0.00012882, 0.00012935, 0.00012988, 0.00013000, 0.00013065, 0.00013130, 0.00013099, 0.00013001, 0.00013066, 0.00013118, 0.00013053, 0.00012732, 0.00012796, 0.00012860, 0.00012924, 0.00013117, 0.00013052, 0.00013060, 0.00013054, 0.00012995, 0.00012872, 0.00012745, 0.00012793, 0.00012808, 0.00013091, 0.00013026, 0.00012961, 0.00012897, 0.00012833, 0.00012769, 0.00012912, 0.00012847, 0.00012874, 0.00012810, 0.00013106, 0.00013040, 0.00012976, 0.00012905, 0.00012840, 0.00013130, 0.00013130, 0.00013130, 0.00013131, 0.00013131, 0.00012807, 0.00012872, 0.00012936, 0.00013001, 0.00013066, 0.00012785, 0.00012849, 0.00012907, 0.00012913, 0.00012978, 0.00012817, 0.00012882, 0.00012897, 0.00012946, 0.00012753, 0.00012817, 0.00012882, 0.00012946, 0.00012888, 0.00012760, 0.00012824, 0.00012887, 0.00012888, 0.00012760, 0.00012821, 0.00012824, 0.00012778, 0.00012881, 0.00012818, 0.00012882, 0.00012753, 0.00012945, 0.00012909, 0.00012954, 0.00013018, 0.00013018, 0.00013104, 0.00013104, 0.00012974, 0.00012840, 0.00012860, 0.00013025, 0.00012902, 0.00013031, 0.00012967, 0.00012966, 0.00013096, 0.00012910, 0.00012845, 0.00012935, 0.00012782, 0.00012865, 0.00012929, 0.00012901, 0.00012836, 0.00012897, 0.00012897, 0.00012897, 0.00012772, 0.00012833, 0.00012897, 0.00012769, 0.00012769, 0.00012832, 0.00012803, 0.00012868, 0.00012820, 0.00012802, 0.00012885, 0.00012866, 0.00012934, 0.00012932, 0.00012870, 0.00012923, 0.00012860, 0.00012966, 0.00012825, 0.00012964, 0.00012900, 0.00012988, 0.00012997, 0.00012924, 0.00012924, 0.00012867, 0.00012796, 0.00012800, 0.00013052, 0.00012997, 0.00012932, 0.00012984, 0.00012901, 0.00012809, 0.00012836, 0.00012869, 0.00012870, 0.00012907, 0.00012934, 0.00012951, 0.00012916, 0.00013015, 0.00012992, 0.00012990, 0.00012935, 0.00012935, 0.00012996, 0.00012995, 0.00013041, 0.00013061, 0.00013121, 0.00012990, 0.00012999, 0.00013052, 0.00013097, 0.00013187, 0.00013186, 0.00013205, 0.00013271, 0.00013261, 0.00013363, 0.00013034, 0.00013099, 0.00013165, 0.00013231, 0.00013034, 0.00013066, 0.00013099, 0.00013165, 0.00013231, 0.00013097, 0.00012963, 0.00013028, 0.00013092, 0.00012976, 0.00012976, 0.00012963, 0.00013294, 0.00013228, 0.00013164, 0.00013162, 0.00013207, 0.00013207, 0.00013207, 0.00013214, 0.00013215, 0.00013221, 0.00013236, 0.00013301, 0.00013142, 0.00013091, 0.00013077, 0.00013027, 0.00012973, 0.00013489, 0.00013422, 0.00013355, 0.00013288, 0.00013222, 0.00013198, 0.00013009, 0.00013074, 0.00013139, 0.00013205, 0.00013063, 0.00013128, 0.00013193, 0.00013042, 0.00013108, 0.00013173, 0.00013076, 0.00013141, 0.00013077, 0.00013086, 0.00013012, 0.00013032, 0.00013017, 0.00013004, 0.00013020, 0.00012961, 0.00012929, 0.00012940, 0.00012891, 0.00012986, 0.00012851, 0.00012826, 0.00012836, 0.00012884, 0.00012790, 0.00012951, 0.00012812, 0.00012831, 0.00012753, 0.00012917, 0.00012899, 0.00012758, 0.00012780, 0.00012727, 0.00012842, 0.00012767, 0.00012886, 0.00012749, 0.00012813, 0.00012812, 0.00012821, 0.00012762, 0.00012646, 0.00012583, 0.00012570, 0.00012444, 0.00012525, 0.00012572, 0.00012574, 0.00012523, 0.00012491, 0.00012508, 0.00012465, 0.00012454, 0.00012522, 0.00012516, 0.00012641, 0.00012579, 0.00012639, 0.00012639, 0.00012468, 0.00012531, 0.00012406, 0.00012473, 0.00012536, 0.00012521, 0.00012520, 0.00012495, 0.00012661, 0.00012713, 0.00012724, 0.00012786, 0.00012602, 0.00012602, 0.00012596, 0.00012661, 0.00012715, 0.00012669, 0.00012610, 0.00012607, 0.00012565, 0.00012628, 0.00012690, 0.00012627, 0.00012676, 0.00012613, 0.00012627, 0.00012641, 0.00012645, 0.00012583, 0.00012564, 0.00012505, 0.00012630, 0.00012641, 0.00012546, 0.00012575, 0.00012650, 0.00012593, 0.00012635, 0.00012719, 0.00012703, 0.00012675, 0.00012720, 0.00012658, 0.00012612, 0.00012549, 0.00012564, 0.00012545, 0.00012576, 0.00012657, 0.00012665, 0.00012729, 0.00012644, 0.00012612, 0.00012666, 0.00012541, 0.00012594, 0.00012782, 0.00012594, 0.00012657, 0.00012657, 0.00012686, 0.00012750, 0.00012749, 0.00012688, 0.00012715, 0.00012670, 0.00012815, 0.00012851, 0.00012871, 0.00012871, 0.00012879, 0.00012951, 0.00013007, 0.00013015, 0.00013073, 0.00013086, 0.00012965, 0.00013094, 0.00013045, 0.00013017, 0.00012889, 0.00012945, 0.00012825, 0.00013138, 0.00013198, 0.00012891, 0.00012945, 0.00013009, 0.00013074, 0.00013152, 0.00013086, 0.00013138, 0.00012762, 0.00012826, 0.00012957, 0.00013013, 0.00013022, 0.00013079, 0.00013144, 0.00013091, 0.00013052, 0.00013117, 0.00013091, 0.00013139, 0.00013024, 0.00013067, 0.00013001, 0.00013081, 0.00013049, 0.00013049, 0.00013006])
pnls = []
print(' Position\t\t| Price\t\t\t| Quantity\t\t| Realized P&L\t\t| Unrealized P&L\t| Average Price\t\t| Total P&L')
print('-' * 148)
calculator = PnLCalculator()
for (p,e) in zip(positions, exec_prices):
    calculator.fill(p, e)
    pnl = round(calculator.unrealised_pnl + calculator.realized_pnl, 8)
    print('\t%.8f\t|\t%.8f\t|\t%.8f\t|\t%.8f\t|\t%.8f\t|\t%.8f\t|\t%.8f' % (p, e, calculator.qty, calculator.realized_pnl, calculator.unrealised_pnl, calculator.avg_price, pnl))
print('-' * 148)